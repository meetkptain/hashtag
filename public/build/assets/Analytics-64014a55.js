import{r,j as b,o as n,k as w,h as k,a as t,b as j,l as D,g as c,c as d,m as p,F as _,t as o}from"./app-18070004.js";import{_ as F}from"./Layout-245e44e2.js";import{_ as u}from"./StatCard-da591d4d.js";const C={class:"mb-6 flex justify-end"},P={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},S={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},B={class:"card"},N={class:"space-y-3"},V={class:"flex items-center gap-3"},$={class:"text-2xl"},A={class:"font-medium"},I={class:"text-sm text-gray-500"},M={class:"text-right"},R={class:"font-semibold text-gray-900"},q={class:"card"},G={class:"space-y-3"},T={class:"flex-shrink-0 w-8 h-8 rounded-full bg-primary-500 text-white flex items-center justify-center font-bold text-sm"},E={class:"flex-1 min-w-0"},K={class:"text-sm font-medium text-gray-900"},L={class:"text-xs text-gray-600 truncate"},U={class:"flex items-center gap-3 mt-1 text-xs text-gray-500"},O={__name:"Analytics",setup(X){const i=r("week"),l=r({}),g=r([]),m=r([]);b(()=>{v()});const v=async()=>{try{const[e,s]=await Promise.all([axios.get(`/api/analytics?period=${i.value}`),axios.get(`/api/analytics/platform?period=${i.value}`)]);l.value=e.data.events||{},g.value=s.data.platforms||[],m.value=e.data.top_posts||[]}catch(e){console.error("Failed to load analytics",e)}},x=e=>({instagram:"📷",facebook:"👍",twitter:"🐦",google:"⭐"})[e]||"📱",f=e=>({instagram:"Instagram",facebook:"Facebook",twitter:"Twitter / X",google:"Google Reviews"})[e]||e,y=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":(e==null?void 0:e.toString())||"0";return(e,s)=>(n(),w(F,{title:"Analytics"},{default:k(()=>[t("div",C,[j(t("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),onChange:v,class:"input w-48"},[...s[1]||(s[1]=[t("option",{value:"day"},"Dernières 24h",-1),t("option",{value:"week"},"Dernière semaine",-1),t("option",{value:"month"},"Dernier mois",-1),t("option",{value:"year"},"Dernière année",-1)])],544),[[D,i.value]])]),t("div",P,[c(u,{title:"Vues",value:l.value.views||0,icon:"👁️",color:"blue"},null,8,["value"]),c(u,{title:"Clics",value:l.value.clicks||0,icon:"🖱️",color:"green"},null,8,["value"]),c(u,{title:"Interactions",value:l.value.interactions||0,icon:"⚡",color:"purple"},null,8,["value"]),c(u,{title:"Chargements",value:l.value.widget_load||0,icon:"📊",color:"orange"},null,8,["value"])]),t("div",S,[t("div",B,[s[3]||(s[3]=t("h3",{class:"text-lg font-semibold mb-4"},"Statistiques par plateforme",-1)),t("div",N,[(n(!0),d(_,null,p(g.value,a=>(n(),d("div",{key:a.platform,class:"flex items-center justify-between p-3 rounded-lg bg-gray-50"},[t("div",V,[t("span",$,o(x(a.platform)),1),t("div",null,[t("p",A,o(f(a.platform)),1),t("p",I,o(a.posts)+" posts",1)])]),t("div",M,[t("p",R,o(y(a.likes+a.comments+a.shares)),1),s[2]||(s[2]=t("p",{class:"text-xs text-gray-500"},"engagement",-1))])]))),128))])]),t("div",q,[s[4]||(s[4]=t("h3",{class:"text-lg font-semibold mb-4"},"Top Posts",-1)),t("div",G,[(n(!0),d(_,null,p(m.value,(a,h)=>(n(),d("div",{key:a.id,class:"flex items-start gap-3 p-3 rounded-lg bg-gray-50"},[t("div",T,o(h+1),1),t("div",E,[t("p",K,o(a.author_name),1),t("p",L,o(a.content),1),t("div",U,[t("span",null,"❤️ "+o(a.likes_count),1),t("span",null,"💬 "+o(a.comments_count),1),t("span",null,"🔁 "+o(a.shares_count),1)])])]))),128))])])]),s[5]||(s[5]=t("div",{class:"card"},[t("h3",{class:"text-lg font-semibold mb-4"},"Évolution de l'engagement"),t("div",{class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},[t("p",{class:"text-gray-500"},"Graphique d'engagement (À implémenter avec Chart.js)")])],-1))]),_:1}))}};export{O as default};
